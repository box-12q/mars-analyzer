<!DOCTYPE html>
<html>
<head>
    <title>–†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞</title>
    <meta charset="utf-8">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Roboto', sans-serif; }
        body { background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }

        .header { text-align: center; margin-bottom: 20px; }
        .logo { font-size: 40px; }
        h1 { color: #1976d2; font-weight: 500; margin: 10px 0; }
        .filename-tag { background: #fff3e0; color: #ef6c00; padding: 5px 12px; border-radius: 15px; font-size: 14px; border: 1px solid #ffe0b2; display: inline-block; }

        .result-card { background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(33, 150, 243, 0.2); padding: 30px; margin-bottom: 30px; }

        .status { text-align: center; padding: 15px; border-radius: 15px; margin-bottom: 20px; font-weight: 500; }
        .status.success { background: #e8f5e9; color: #2e7d32; border: 2px solid #a5d6a7; }
        .status.info { background: #e3f2fd; color: #1565c0; border: 2px solid #90caf9; }

        .stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }
        .stat-item { text-align: center; padding: 15px; background: #f8fdff; border-radius: 15px; border: 1px solid #e3f2fd; }
        .stat-value { font-size: 24px; font-weight: 700; color: #1976d2; margin-bottom: 5px; }
        .stat-label { color: #666; font-size: 13px; }

        .image-container { text-align: center; margin: 20px 0; }
        .result-image { max-width: 100%; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); border: 3px solid #e3f2fd; }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        .pagination { display: flex; justify-content: space-between; align-items: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; }

        .btn { display: inline-flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%); color: white; text-decoration: none; padding: 12px 25px; border-radius: 25px; font-weight: 500; transition: 0.3s; box-shadow: 0 4px 10px rgba(33, 150, 243, 0.3); border: none; font-size: 15px; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(33, 150, 243, 0.4); }
        .btn-outline { background: white; color: #1976d2; border: 2px solid #2196f3; box-shadow: none; }
        .btn-outline:hover { background: #f0f7ff; transform: translateY(-2px); }
        .btn-disabled { background: #e0e0e0; color: #999; pointer-events: none; box-shadow: none; }

        .counter { font-weight: 500; color: #555; background: #f5f5f5; padding: 8px 15px; border-radius: 20px; }

        @media (max-width: 600px) {
            .stats { grid-template-columns: 1fr; }
            .pagination { flex-direction: column; gap: 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ü™ê</div>
            <h1>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞</h1>
            <span class="filename-tag">{{ data.original_name }}</span>
        </div>

        <div class="result-card">
            <div class="status {% if data.stats.has_caps %}success{% else %}info{% endif %}">
                {% if data.stats.has_caps %}
                    ‚úÖ –ü–æ–ª—è—Ä–Ω—ã–µ —à–∞–ø–∫–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã
                {% else %}
                    ‚ÑπÔ∏è –ü–æ–ª—è—Ä–Ω—ã–µ —à–∞–ø–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
                {% endif %}
            </div>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value">{{ data.stats.cap_count }}</div>
                    <div class="stat-label">–û–±–ª–∞—Å—Ç–µ–π</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">{{ "%.1f"|format(data.stats.ice_percentage) }}%</div>
                    <div class="stat-label">–ü–ª–æ—â–∞–¥—å</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">
                        {% if data.stats.ice_percentage > 5 %} CO‚ÇÇ + H‚ÇÇO
                        {% elif data.stats.ice_percentage > 1 %} CO‚ÇÇ
                        {% else %} –°–ª–µ–¥—ã
                        {% endif %}
                    </div>
                    <div class="stat-label">–°–æ—Å—Ç–∞–≤</div>
                </div>
            </div>

            <div class="image-container">
                <img src="{{ url_for('uploaded_file', filename=data.result_filename) }}" alt="–†–µ–∑—É–ª—å—Ç–∞—Ç" class="result-image">
            </div>

            {% if data.stats.has_caps %}
            <div style="background: #e8f5e9; padding: 15px; border-radius: 10px; border-left: 4px solid #4caf50; margin-bottom: 20px;">
                <h4 style="color: #2e7d32; margin-bottom: 5px;">–ù–∞—É—á–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞</h4>
                <p style="font-size: 14px; color: #444;">–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ —Å–≤–µ—Ç–ª—ã–µ —É—á–∞—Å—Ç–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º –ø–æ–ª—è—Ä–Ω–æ–≥–æ –ª—å–¥–∞ –ú–∞—Ä—Å–∞.</p>
            </div>
            {% endif %}

            <div class="pagination">
                {% if index > 0 %}
                    <a href="{{ url_for('show_result', index=index - 1) }}" class="btn">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</a>
                {% else %}
                    <a href="#" class="btn btn-disabled">‚¨ÖÔ∏è –ù–∞–∑–∞–¥</a>
                {% endif %}

                <div class="counter">
                    –°–Ω–∏–º–æ–∫ {{ index + 1 }} –∏–∑ {{ total }}
                </div>

                {% if index < total - 1 %}
                    <a href="{{ url_for('show_result', index=index + 1) }}" class="btn">–í–ø–µ—Ä—ë–¥ ‚û°Ô∏è</a>
                {% else %}
                    <a href="{{ url_for('index') }}" class="btn btn-outline">üè† –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–µ</a>
                {% endif %}
            </div>
        </div>
    </div>
</body>
</html>
